import numpy as np
print("请输入机械臂末端姿态:")
nx_=input("请输入nx:")
ox_=input("请输入ox:")
ax_=input("请输入ax:")
px_=input("请输入px:")
ny_=input("请输入ny:")
oy_=input("请输入oy:")
ay_=input("请输入ay:")
py_=input("请输入py:")
nz_=input("请输入nz:")
oz_=input("请输入oz:")
az_=input("请输入az:")
pz_=input("请输入pz:")
I2=input("请输入杆长2:")
I4=input("请输入杆长4:")
I5=input("请输入杆长5:")
L2=float(I2)
L4=float(I4)
L5=float(I5)
nx=float(nx_)
ox=float(ox_)
ax=float(ax_)
px=float(px_)
ny=float(ny_)
oy=float(oy_)
ay=float(ay_)
py=float(py_)
nz=float(nz_)
oz=float(oz_)
az=float(az_)
pz=float(pz_)
A=np.array([
    [nx,ox,ax,px],
    [ny,oy,ay,py],
    [nz,oz,az,pz],
    [0,0,0,1]])
B1=np.arctan(py/px)
B234=np.arctan(az/(np.cos(B1)*ax+np.sin(B1)*ay))
C3=((px*np.cos(B1)+py*np.sin(B1)-np.cos(B234)*L5)**2+(pz-np.sin(B234)*L5)**2-L2**2-L4**2)/(2*L2*L4)
B3=np.arcsin(C3)
S2=(np.cos(B3)*L4+L2)*(pz-np.sin(B234)*L5)-np.sin(B3)*L4*(px*np.cos(B1)+py*np.sin(B1)-np.cos(B234)*L5)
C2=(np.cos(B3)*L4+L2)*(px*np.cos(B1)+py*np.sin(B1)-np.cos(B234)*L5)+np.sin(B3)*L4*(pz-np.sin(B234)*L5)
B2=np.arctan(S2/C2)
B4=B234-B2-B3
B5=np.arctan((np.cos(B234)*(np.cos(B1)*ax+np.sin(B1)*ay)+np.sin(B234)*az)/(np.sin(B1)*ax-np.cos(B1)*ay))
B6=np.arctan((np.sin(B234)*(np.cos(B1)*nx+np.sin(B1)*ny)-np.cos(B234)*nz)/(np.sin(B234)*(np.cos(B1)*ox+np.sin(B1)*oy)-np.cos(B234)*oz))
print("机械臂各转角:")
print(B1)
print(B2)
print(B3)
print(B4)
print(B5)
print(B6)